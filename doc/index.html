<html>
<h1>Transformenator</h1>
Transformenation is something that should be possible to do with some rudimentary shell scripting.  
You should be able to run a binary file through sed or awk and have byte sequences change to different byte sequences.  
<p>
But you can't.
<p>
	You could probably run a file through a hex dumper, change hex values, then un-transform it back to binary.
But that's kind of a pain too.  
The problem is that sed and awk work on lines, defined as things that are delineated by what they consider line ending characters like 0x0d or 0x0a.
But what if your data stream contains 0x0d and 0x0a bytes - but you don't want them to count as line endings?
What if you need to remove nulls, hex zeroes, or whatever you want to call them from a binary file or data stream?
<p>
Your're stuck.
<p>
Maybe that's why you're here.
Transformenator can help.
<p>
<h2>Useage</h2>
Invoke the transformenator Java jar file from any command line, ant script, or what have you.
Standard in is transformed to standard out according to a set of rules you specify in a file 
named with the <code>-t xform</code> option. 
You can also simply specify the input file name it it will be read rather than stdin.
Using the stdin redirection method may cause undesirable pre-transformations to happen based on your console settings,
so the direct file method may be preferable.  See the binary <a href="#Notes">notes</a> below for more information.
<p>
For example:
<xmp>
java -jar transformenator.jar -t transform.xform < infile.bin > outfile.bin
java -jar transformenator.jar -t transform.xform infile.bin > outfile.bin
</xmp>
<p>
Where:<br>
<code>transform.xform</code> is a file containing the set of transformations you want to make<br>
<code>infile.bin</code> is the original file<br>
<code>outfile.bin</code> is the resulting file after running the transforms
<p>
A sample <code>transform.xform</code> file might simply look like this:
<xmp>
; Change 0x00 to 0x20
00 = 20
</xmp>
Semicolons denote comment lines.
The left side of the equals sign is always a byte pattern, given in hex digits, with no other decoration.
The right side can be blank, another byte pattern given in undecorated hex, or if surrounded in double quotes, ASCII text.
For example:
<xmp>
; 0x86 appeared at the beginning of files sometimes, after the preamble.  Remove it.
86 =
; Start of heading
83 = "\par\par\pard\s2\b\fs36 "
; Italics on
b12d31 = "\i "
; Italics off
b12d30 = "\i0 "
</xmp>
There is a special case for returns and newlines.
If you need to translate a byte pattern into something that includes them, you need to escape the backslash.
For example:
<xmp>
; Justify on
7a0a1531 = "\\r\\n</pre>"
</xmp>
There are four special productions in the transform specification:<br>
<code>head</code> = specifies a beginning-of-file preamble to add to the beginning of the resultant file<br>
<code>tail</code> = specifies a end-of-file suffix to add to the end of the resultant file<br>
<code>trim-leading</code> = specifies a number of bytes to trim off the beginning of the file (in hex bytes) <u>before</u> any binary transforms are applied<br>
<code>regex</code> = specifies one of potentially many regular expressions to run on the output <u>after</u> any and all binary transforms are applied<br>
<br>
An example that makes use of each:
<xmp>
; Header for HTML format
head = "<html>"
; Closing brace for HTML format
tail = "</html>"
; Trim the leading 0x400 bytes - this is a Pascal format file
trim_leading = 400
; Remove left/right margin specs: zlmxx, :rmxx
regex = @[z|:][l|r]m[0-9]*@@
; Remove next file specification
regex = @znx:.*@@
</xmp>
Regular expressions are surrounded by delimiters - the first character in the string serves as that delimiter.
So the production <code>regex=$abc$123$</code> will use <code>$</code> as the delimiter, and replace all occurrences of <code>abc</code> with <code>123</code>.

<h2>Binary File Handling <a name="Notes">Notes</a></h2>
Some command-line environments may do a little chicanery with data passed via stdin.
If transforms aren't working the way you expect, you are missing transforms especially on
bytes greater than 0x7f, try passing the literal file instead of stdin, or set your 
console encoding appropriately as part of the java invocation
(-Dconsole.encoding=&ltyour local encoding&gt).

<h2>Project Page at SourceForge</h2>
<a href="http://sourceforge.net/projects/transformenator"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=170262&amp;type=13" width="120" height="30" alt="Get Transformenator at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

<!-- Just a little evil... let our friends at the Google track page hits -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-697468-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>