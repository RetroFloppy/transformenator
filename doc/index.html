<html>
<title>Transformenator</title>
<a href="http://sourceforge.net/projects/transformenator/files/"><img src="xfmn.png"></a>
<h1>Transformenator <a href="http://sourceforge.net/projects/transformenator/files/">(Download)</a></h1>
Transformenation is something that should be possible to do with some rudimentary shell scripting.  
You should be able to run a binary file through sed or awk and have byte sequences change to different byte sequences.  
<p>
But you can't.  Maybe that's why you're here.  Transformenator can help.
<p>
It turns out that this is really, really useful when faced with files from ancient word processors, for example.
They used all kinds of crazy binary annotations within a file (this is before the days of text markup, remember).
With Transformenator, it's easy to swap out those binary annotations for HTML or RTF tags that all of a sudden make those
ancient files readable again, maybe even with their original formatting and highlighting intact.
Many samples come built into the Transformenator package that can make such file conversions easy. 
<p>
The list of these samples is available in CVS at
<a target="_new" href="http://transformenator.cvs.sourceforge.net/viewvc/transformenator/transformenator/src/org/transformenator/transforms/">this link.</a>
<p>
<h2>Useage</h2>
Invoke the transformenator Java jar file from any command line, ant script, or what have you.
A set of rules (comprising a transform) are applied to the input file and written to the output file.
You can use one of the included sample transforms, and you can write your own as simply as creating a text file.
<p>
For example:<xmp>java -jar transformenator.jar transform infile outfile</xmp>
<p>
Where:<br>
<code>transform</code> is the name of a file containing the set of transformations you want to make<br>
<code>infile</code> is the original file<br>
<code>outfile</code> is the resulting file after making all transformations

<h2>Example</h2>
Say you have the file below named <code>infile</code>, represented in a typical hex editor:
<p>
<xmp>(Offset) (Hex data)                               (ASCII representation)
-------- ---------------------------------------  ----------------
0000000: 6162 6364 0000 6566 6768 696a 1a67 6574  abcd..efghij.get
0000010: 2072 6964 206f 6620 6d65 210a             rid of me!.</xmp>
<p>Say we want to change the hex zeroes in the middle to spaces, and eliminate anything after the EOF (0x1a).
Create a transform file named <code>transform</code> to do that:
<p>
<xmp>; Make nulls into spaces
00 = 20
; ASCII EOF character really means EOF
1a = "{@@<FiLe_EoF>@@}"</xmp>
<p>
So, we run <code>infile</code> through the <code>transform</code> file and send the output to a file named <code>outfile</code>:
<p>
<xmp>%java -jar transformenator.jar transform infile outfile</xmp>
<p>
The resulting <code>outfile</code> looks like this in a hex editor:
<p>
<xmp>(Offset) (Hex data)                               (ASCII representation)
-------- ---------------------------------------  ----------------
0000000: 6162 6364 2020 6566 6768 696a            abcd  efghij</xmp>
<p>
Observe that nulls became spaces, and other trailing stuff after the EOF character has been removed.

<h2><a name="transform">Transform</a> Specification</h2>

<p>
The instructions for making the various transformations you want are simply listed in a plain text file.
A <code>transform</code> file might look like this, for example:
<xmp>; Change 0x00 to 0x20
00 = 20</xmp>
<p>
The left side of the equals sign, hash mark, or percent sign is the byte pattern to search for.
To specify it, the following conventions are used:
<ul>
<li>A byte pattern, given in even numbers of hex digits, with no other decoration<br>
<xmp>0d0a32ea4f</xmp>
<li>A byte pattern combined with "don't care" values consisting of even numbers of non-hex digits (periods/full stops are preferred but not enforced)<br>
<xmp>0d0a....4f</xmp>
<li>A byte pattern combined with "must not be zero" values consisting of even numbers of exclamation points<br>
<xmp>0d0a32!!4f</xmp>
</ul>
The right side can be blank, another byte pattern given in undecorated hex, or ASCII text if surrounded in double quotes.
Examples:
<xmp>; Hard newline
8d = 0d0a
; 0x86 appeared at the beginning of files sometimes, after the preamble.  Remove it.
86 =
; Start of heading
83 = "\par\par\pard\s2\b\fs36 "
; Italics on
b12d31 = "\i "
; Italics off
b12d30 = "\i0 "
</xmp>
<p>
There is a special case for specifying returns and newlines.
If you need to translate a byte pattern into something that includes them, you need to escape the backslash.
For example:
<xmp>; Justify on
7a0a1531 = "\\r\\n</pre>"</xmp>
<p>
The table below lists the special processing capabilities of Transformenator.
<table border="1">
<tbody>
<tr>
<th align="center"><b>Construct</b></th>
<th align="left"><b>Explanation</b></th>
<th align="left"><b>Example</b></th>
</tr>
<tr>
<td align="center"><xmp>;</xmp></td>
<td align="left">Comment, will be ignored</td>
<td align="left"><xmp>; This text will not be considered</xmp></td>
</tr>
<tr>
<td align="center"><xmp>=</xmp></td>
<td align="left">Replace the left side of the equals with what's on the right side and move past the replacement looking for the next match</td>
<td align="left"><xmp>; Replace nulls with spaces
00 = 20</xmp></td>
</tr>
<tr>
<td align="center"><xmp>#</xmp></td>
<td align="left">Replace the left side of the hash with what's on the right side and re-consider the just-replaced data for more matches</td>
<td align="left"><xmp>; Add a newline - may need to add two
8d # 0d0a
0d0a9d = 0d0a0d0a</xmp></td>
</tr>
<tr>
<td align="center"><xmp>%</xmp></td>
<td align="left">Replace the left side of the percent with what's on the right side, alternating between two values separated by commas</td>
<td align="left"><xmp>; Toggle italics on and off
7f047f % "\i1 ","\i0 "</xmp></td>
</tr>
<tr>
<td align="center"><xmp>[xx..yy] = zz</xmp></td>
<td align="left">Shift a byte range byte-for-byte to a different range starting at the value after the equals sign, or remove them altogether</td>
<td align="left"><xmp>; Shift 0x41 through 0x5a up to 0x61
[41..5a] = 61
; Remove 0xf0 through 0xff
[f0..ff] = </xmp></td>
</tr>
<tr>
<td align="center"><xmp>eof_lo</xmp><br><xmp>eof_mid</xmp><br><xmp>eof_hi</xmp><br><xmp>eof_offset</xmp></td>
<td align="left">Used together when a file contains a binary length of file vector.  <xmp>eof_lo</xmp> is the least significant byte, <xmp>eof_mid</xmp> is the next most signficant byte, and <xmp>eof_high</xmp> is the most significant byte of the vector.  These values together comprise the offset into the file.  <xmp>eof_offset</xmp> is a static offset to tune the exact end point in case the vector is offset by some amount.</td>
<td align="left"><xmp>; Calculate the EOF based on file contents
eof_hi = 00
eof_mid = 7d
eof_lo = 7c
eof_offset = 7f</xmp></td>
</tr>
<tr>
<td align="center"><xmp>head</xmp></td>
<td align="left">Specifies a prefix to add to the beginning of the resultant file</td>
<td align="left"><xmp>; Header for HTML format
head = "<html>"</xmp></td>
</tr>
<tr>
<td align="center"><xmp>tail</xmp></td>
<td align="left">Specifies a suffix to add to the end of the resultant file</td>
<td align="left"><xmp>; Trailer for HTML format
tail = "</html>"</xmp></td>
</tr>
<tr>
<td align="center"><xmp>trim_leading</xmp></td>
<td align="left">Specifies a number of bytes to trim off the beginning of the input file (in hex bytes) before any binary transforms are applied</td>
<td align="left"><xmp>; Trim the leading 0x400 bytes
trim_leading = 0400</xmp></td>
</tr>
<td align="center"><xmp>trim_trailing</xmp></td>
<td align="left">Specifies a number of bytes to trim off the end of the input file (in hex bytes) before any binary transforms are applied.  Results are undefined if used in conjunciton with <code>eof_*</code> vectors above</td>
<td align="left"><xmp>; Trim the trailing 0xDF bytes
trim_trailing = df</xmp></td>
</tr>
<tr>
<td align="center"><xmp>regex</xmp></td>
<td align="left">Specifies a regular expression to run on the output after any and all binary transforms are applied; multiple regex expressions are allowed, one per line; the first character in the string serves as the delimiter</td>
<td align="left"><xmp>; Remove margin specs: zlmxx, :rmxx
regex = @[z|:][l|r]m[0-9]*@@
; Remove next file specification
regex = @znx:.*@@</xmp></td>
</tr>
<tr>
<td align="center"><xmp>{@@<FiLe_SoF>@@}</xmp></td>
<td align="left">Special command value signifying the start of file; when the value specified on left side of the equals is first found, everything up to that point will be discarded</td>
<td align="left"><xmp>; SOF is \r\nS
0d0a53 = "{@@<FiLe_SoF>@@}"</xmp></td>
</tr>
<tr>
<td align="center"><xmp>{@@<FiLe_SoF_GrEeDy>@@}</xmp></td>
<td align="left">Special command value signifying the start of file; when the value specified on left side of the equals is found for the final time in a file, everything up to that point will be discarded</td>
<td align="left"><xmp>; SOF may appear several times
1f = "{@@<FiLe_SoF_GrEeDy>@@}"</xmp></td>
</tr>
<tr>
<td align="center"><xmp>{@@<FiLe_EoF>@@}</xmp></td>
<td align="left">Special command value signifying the end of file; everything found after that point will be discarded</td>
<td align="left"><xmp>; EOF is ctrl-Z
1a = "{@@<FiLe_EoF>@@}"</xmp></td>
</tr>
</tbody>
</table>
<p>
The Transformenator project comes with several example transforms used to convert various early binary word processor
formats to RTF, HTML, or plain ASCII text.
You can see the list of available "internal" transforms by invoking the transformenator jar with no parameters, like so:
<p>
<xmp>%java -jar transformenator.jar</xmp>
The source to these internal transforms is available in CVS at
<a target="_new" href="http://transformenator.cvs.sourceforge.net/viewvc/transformenator/transformenator/src/org/transformenator/transforms/">this link.</a>

<h2><a name="Utility">Utility</a> Functions</h2>
<p>
The transformenator.jar includes several supporting utilities.  They are:
<table border="1">
<tbody>
<tr>
<th align="left"><b>Utility: <code>org.transformenator.util.(...)</code></b></th>
<th align="left"><b>Parameters</b></th>
<th align="left"><b>Summary</b></th>
</tr>
<tr>
<td align="left"><code>DOSImage</code></td>
<td align="left"><code>display infile</code><br>(or)<br><code>update infile outfile [force160|180|320|360|360a|1200]</code></td>
<td align="left">View or add the BIOS Parameter Block (BPB) to older DOS disk images to make them mountable - fixes those pesky "no mountable filesystems" errors, also removes the <a href="http://en.wikipedia.org/wiki/Stoned_%28computer_virus%29" class="externalLink" target="_new">Stoned</a> virus</td>
</tr>
<tr>
<td align="left"><code>TransformFile</code></td>
<td align="left"><code><a href="#transform"><i>transform</i></a> infile outfile</code></td>
<td align="left">Apply <i>transform</i> to a single file - the default operation of transformenator.jar</td>
</tr>
<tr>
<td align="left"><code>TransformDirectory</code></td>
<td align="left"><code><a href="#transform"><i>transform</i></a> in_directory out_directory</code></td>
<td align="left">Apply <i>transform</i> to all files in a filesystem tree recursively</td>
</tr>
<tr>
<td align="left"><code>TransformDirectory</code></td>
<td align="left"><code>fix_filenames in_directory</code></td>
<td align="left">Convert dodgy chracters in filenames (unicode, etc.) to DOS-legal characters in a filesystem tree recursively</td>
</tr>
<tr>
<td align="left"><code>ExtractAdministrativeSystemFile</code></td>
<td align="left"><code>infile outfile</code></td>
<td align="left">Extract file from a IBM 5520 Administrative System disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractCPTFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from CPT word processor disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractCSV</code></td>
<td align="left"><code><i><a href="csv.html">csv-transform</a></i> infile outfile.csv</code></td>
<td align="left">Extract fixed-length records from a file as comma separated values (see <i>csv-transform</i> specification <a href="csv.html">here</a>)</td>
</tr>
<tr>
<td align="left"><code>ExtractCTOSArchive</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from the tar-like archive in CTOS (incomplete)</td>
</tr>
<tr>
<td align="left"><code>ExtractDisplaywriterFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from Displaywriter word processor disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractEasyWriterFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract EasyWriter word processing files from a 13-sector Apple II disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractHPFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from HP instrument (not LIF) disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractMemoryWriterFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from a disk image from an unknown word processor, possibly Xerox MemoryWriter</td>
</tr>
<tr>
<td align="left"><code>ExtractSeawellFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract Seawell DOS files from 8" disk images</td>
</tr>
<tr>
<td align="left"><code>ExtractSmithCoronaFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from Smith-Corona typewriter disk images</td>
</tr>
<tr>
<td align="left"><code>ExtractWangFiles</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract Wang OIS word processing files from a Wang <a target="_new" href="http://wang2200.org/disk_org.html">disk image</td>
</tr>
<tr>
<td align="left"><code>ExtractXerox860Files</code></td>
<td align="left"><code>infile [out_directory]</code></td>
<td align="left">Extract files from Xerox 860 word processor disk image</td>
</tr>
<tr>
<td align="left"><code>RevealValdocsEntries</code></td>
<td align="left"><code>infile outfile</code></td>
<td align="left">"Un-hide" the CP/M directory entries of files that have a leading byte of 0x60 in a disk image - typical of Valdocs files on Epson QX-10 TPM-II disk images</td>
</tr>
</tbody>
</table>
<p>
Each is invokable with a Java command like this:<code>java -cp transformenator.jar org.transformenator.util.TransformDirectory <i>transform</i> in_directory out_directory</code>
<p>
There is also a batch file/shell script, <code>transformutil.bat/.sh</code> that simplifies the invocation of all of the utilities.
<p>
<h2>Related Projects</h2>

Binary Block Editor (<a target="_new" href="http://bbe-.sourceforge.net/">bbe</a>) is a sed-like editor for binary files.

<h2>Transformenator Project Page at SourceForge</h2>
<a href="http://sourceforge.net/projects/transformenator"><img src="http://sflogo.sourceforge.net/sflogo.php?group_id=170262&amp;type=13" width="120" height="30" alt="Get Transformenator at SourceForge.net. Fast, secure and Free Open Source software downloads" /></a>

<!-- Just a little evil... let our friends at the Google track page hits -->
<script type="text/javascript">
  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-697468-5']);
  _gaq.push(['_trackPageview']);
  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();
</script>